<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Data Noise</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  
  <!-- Include Mephisto's default RSS feed -->
  <link href="/feed/atom.xml" rel="alternate" type="application/atom+xml" />

  <script src="/javascripts/prototype.js" type="text/javascript"></script>
  <link href="/stylesheets/application.css" rel="stylesheet" type="text/css" />
<script id="snap_preview_anywhere" type="text/javascript" src="http://spa.snap.com/snap_preview_anywhere.js?ap=1&amp;key=bde75036515bc3e67f6e5e973a60918f&amp;sb=0&amp;th=linen&amp;cl=0&amp;si=0&amp;oi=0&amp;domain=datanoise.com"></script>
</head>
<body>
<div id="container">
  <div id="page">
    <div id="header-noshadow"></div>
    
    <div id="header">
      <h1><a href="/">Data Noise</a></h1>
    </div> 
    
    <div id="subheader"></div>
    
    <div id="content">
      
<div class="hentry" id="article-413">
  <h2 class="entry-title">
    <a href="/articles/2007/5/10/ruby-debug-basics-screencast">ruby-debug basics screencast</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">May 10, 2007 </span>
<!--
    !-->
</div>
<abbr class="published" title="2007-05-10T00:59:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p><a href="http://brian.maybeyoureinsane.net/blog/2007/05/07/ruby-debug-basics-screencast/">Brian Donovan</a> shows the basics of using ruby-debug. This is very nice addition to my already outdated <a href="http://datanoise.com/articles/2006/7/12/tutorial-on-ruby-debug">tutorial</a>. He also announced that his next screencast will cover debugging of a Rails application. </p>

<p>One the same note, the next version of Rails comes with the native ruby-debug support. The relevant changeset is <a href="http://dev.rubyonrails.org/changeset/6611">here</a>. </p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-203">
  <h2 class="entry-title">
    <a href="/articles/2007/4/3/ruby-debug-version-0-9-1-has-been-released">ruby-debug version 0.9.1 has been released!</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">April 03, 2007 </span>
<!--
    !-->
</div>
<abbr class="published" title="2007-04-03T02:14:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <h2>Installation</h2>

<p>As usual:</p>

<pre><code>    $ sudo gem in ruby-debug
</code></pre>

<h2>Changes</h2>

<p>This is mainly a maintenance release, which includes several important bugfixes related to frame calculations. </p>

<p>In particular,</p>
  
    
    <div class="extended">
      <p><a href="/articles/2007/4/3/ruby-debug-version-0-9-1-has-been-released">Continue reading...</a></p>
    </div>
    
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-150">
  <h2 class="entry-title">
    <a href="/articles/2007/3/15/ruby-debug-version-0-8-has-been-released">ruby-debug version 0.8 has been released!</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">March 15, 2007 </span>
<!--
    !-->
</div>
<abbr class="published" title="2007-03-15T16:17:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>This is mostly a maintenance release. The major change is that <strong>ruby-debug</strong> has been split in two parts:</p>

<ol>
<li><p><strong>ruby-debug-base</strong> gem contains the debugger core API written in C. Use this gem if you want to create your own interface to the debugger and don't want to depend on changes to the ruby-debug CLI. The API is considered somewhat stable.</p></li>
<li><p><strong>ruby-debug</strong> gem depends on <strong>ruby-debug-base</strong> and provides CLI interface.</p></li>
</ol>
  
    
    <div class="extended">
      <p><a href="/articles/2007/3/15/ruby-debug-version-0-8-has-been-released">Continue reading...</a></p>
    </div>
    
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-94">
  <h2 class="entry-title">
    <a href="/articles/2007/2/2/ruby-debug-0-7-released">ruby-debug 0.7 released</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">February 02, 2007 </span>
<!--
    !-->
</div>
<abbr class="published" title="2007-02-02T00:46:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>I'm happy to announce that ruby-debug 0.7 is available now.</p>

<p>This is mostly a bugfix release. It also has many internal changes that greatly improve the debugger performance. It is so much faster now, that sometime I don't even notice that I'm using it  when I start <em>mongrel</em> with <em>rdebug</em> script. The list of changes includes:</p>

<ul>
<li><code>Frame</code> class has been removed and instead a preallocated block of memory is used to keep frames information. This change has decreased the number of object being created. </li>
<li>Another major change involves the fact that the debugger by default doesn't create Binding object for each frame. This is a very expensive operation and it's been the major source of performance problems. Instead, ruby-debug keeps references to the live Ruby's data structures that store information about the local context (ruby_scope). It's still possible to restore the old behavior by using <code>--keep-frame-binding</code> option, or <code>Debugger.keep_frame_binding = true</code>.</li>
<li>New <em>set</em> command has been introduced. You can use <code>help set</code> command to see what options are available.</li>
</ul>

<p>Enjoy, and please report any problem you find!</p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-77">
  <h2 class="entry-title">
    <a href="/articles/2007/1/27/ruby-debug-0-6-1-released">ruby-debug 0.6.1 Released</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">January 27, 2007 </span>
<!--
    !-->
</div>
<abbr class="published" title="2007-01-27T00:08:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>ruby-debug 0.6.1 has been released!</p>

<pre><code>    $ sudo gem install ruby-debug
</code></pre>

<p>ruby-debug is a C extension that implements the fast Ruby debugger.</p>

<h3>Changes</h3>

<ul>
<li><p>Significant performance improvements.</p></li>
<li><p>Bug fixes.</p></li>
</ul>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-27">
  <h2 class="entry-title">
    <a href="/articles/2006/12/20/post-mortem-debugging">Post-mortem debugging</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">December 20, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-12-20T17:38:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>ruby-debug 0.5.1 has been released! The installation as usual:</p>

<pre><code>    $ sudo gem install ruby-debug
</code></pre>

<p>Below is the list of changes:</p>

<h3>Post-mortem debugging</h3>

<p>First of all, what the heck is post-mortem debugging? Let's say you run a script and instead of the expected result you get an exception trace. Wouldn't it be great if we can roll back to the point where this exception is raised and explore the state of your program (possibly, by moving up and down the frame stack)? </p>

<p>Note that it is different than setting a <em>catch point</em>. By setting a catch point you activate the debugger when an exception (of a specific class) is about to be raised and it doesn't matter whether it's going to be handled later in the code or not. In the post-mortem case you know that an exception's been raised and not handled as expected.</p>

<p>Now I'm going to demonstrate several ways of using this feature, starting from the simplest:</p>
  
    
    <div class="extended">
      <p><a href="/articles/2006/12/20/post-mortem-debugging">Continue reading...</a></p>
    </div>
    
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-22">
  <h2 class="entry-title">
    <a href="/articles/2006/9/15/debugging-rails-application">Debugging Rails application</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">September 14, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-09-14T21:18:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>In this article I am going to describe several ways you can debug your Rails application with <strong>ruby-debug</strong> starting from simplest and proceeding with more sophisticated setup.</p>

<h3>Simplest of all</h3>

<p>The simplest and most obvious way is to start your application with <code>rdebug</code> script:</p>

<pre><code>    $ rdebug ./script/server webrick
</code></pre>

<p><em>This method doesn't work with lighttpd since the latter starts several child Rails processes.</em></p>

<p>When you execute this command you end up with debugger prompt where you can set up your breakpoints.</p>

<h3>Debugging without <code>rdebug</code> script</h3>

<p>First you need to activate the debugger in your <code>development.rb</code> file:</p>

<pre><code>    ./config/environments/development.rb:

    ...
    require 'ruby-debug'
    Debugger.start
</code></pre>

<p>Now you can use <code>Kernel#debugger</code> method to activate debugger:</p>

<pre><code>    def my_action
      debugger
      ...
    end
</code></pre>

<h3>Remote debugging.</h3>

<p>If for some reason you want to connect remotely to debugger, you can start it with remote debugging enabled:</p>

<pre><code>    $ rdebug -s ./script/server webrick
</code></pre>

<p>and then connect to it with</p>

<pre><code>    $ rdebug -c
    Connected.
    /usr/local/lib/ruby/1.8/webrick/server.rb:91: if svrs = IO.select(@listeners, nil, nil, 2.0)
    (rdb:1)
</code></pre>

<p>Once again, at this point you can add breakpoints and proceed.</p>

<h4>Adding breakpoints directly in your code</h4>

<p>What if you don't want to setup breakpoints all the time from the debugger's command prompt and you want to use <code>Kernel#debugger</code> method instead. In this case when you start a debugger, you should notify it not stop when a remote client is connected with <code>-n</code> option:</p>

<pre><code>    $ rdebug -sn ./script/server webrick
</code></pre>

<h3>Remote debugging without <code>rdebug</code> script</h3>

<p>As always activate your debugger in development.rb file:</p>

<pre><code>    ./config/environments/development.rb:

    ...
    require 'ruby-debug'
    Debugger.start_remote
</code></pre>

<p>Here you can control it with two options:</p>

<pre><code>    ./config/environments/development.rb:

    ...
    require 'ruby-debug'
    Debugger.wait_connection = true
    Debugger.stop_on_connect = true
    Debugger.start_remote
</code></pre>

<ul>
<li><p><code>Debugger.wait_connection</code> options makes debugger wait until you connect to it remotely.</p></li>
<li><p><code>Debugger.stop_on_connect</code> drop you to the debugger prompt as soon as you connect to it.</p></li>
</ul>

<h3>The method I use most of the time</h3>

<p>All described so far methods suffer from one thing: <em>the debugger is always activated</em>. It can slow down your application significantly. What if I want to activate it only in a particular place in my code? As always there are two ways to do that. But first you should only require debugger in <code>development.rb</code> file without starting it:</p>

<pre><code>    ./config/environments/development.rb:

    ...
    require 'ruby-debug'
</code></pre>

<ul>
<li><p><code>Debugger#start</code> takes a block:</p>

<pre><code>def my_action
  ...
  # at this point the debugger is still disabled
  Debugger.start do
    # here debugger is enabled
    # below goes the code you want to debug
    ...
  end
  # at this point the debugger is disabled
  ...
end
</code></pre></li>
<li><p>Use <code>Module#debug_method</code> (available since version 0.4.2):</p>

<pre><code>class MyController &lt; ApplicationController
  def my_action
    ...
  end
  debug_method :my_action
end
</code></pre>

<p>Now whenever you reach <code>my_action</code> method, the debugger is activated.</p></li>
</ul>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/rails">Rails</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-19">
  <h2 class="entry-title">
    <a href="/articles/2006/8/27/control-debugger-from-textmate">Control debugger from TextMate</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">August 27, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-08-27T13:24:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>Wouldn't it be great if I can set breakpoints right from within <a href="http://www.macromates.com">TextMate</a>? I've been thinking about this myself for sometime. </p>

<p>And now I'd like to introduce a new <a href="http://datanoise.com/assets/2007/1/27/Ruby_Debug.zip">Ruby Debug Bundle</a>. </p>

<p><em>Note that in order to use it you must have the latest version (0.4.1 or higher) of <strong>ruby-debug</strong> installed.</em></p>

<h3>How to use it?</h3>

<p>Let's say you want to debug your Rails application.</p>

<ol>
<li><p>Start your application with the remote debugging enabled:</p>

<pre><code>$ rdebug -sn ./script/server webrick
</code></pre></li>
<li><p>Connect to the debugger (in new terminal):</p>

<pre><code>$ rdebug -c
Connected.
</code></pre></li>
<li><p>In TextMate go to the line where you want to set a breakpoint and press &#x21E7;&#x2318;B and select <strong>Set Breakpoint at Current Line</strong>.</p></li>
<li><p>Open your browser and start using your application until you reach the breakpoint. </p></li>
</ol>

<p>That's it.</p>

<p>Currently, these commands are available:</p>

<ol>
<li><em>Set Breakpoint at Current Line</em></li>
<li><em>Delete All Breakpoints</em>.</li>
<li><em>Show Breakpoints</em> - show all breakpoints as a tooltip.</li>
<li><em>Interrupt</em> - interrupt the last debugged thread or, if there is no one, the main thread.</li>
<li><em>Quit</em> - quit application.</li>
</ol>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> <a href="/textmate">TextMate</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-18">
  <h2 class="entry-title">
    <a href="/articles/2006/8/26/breakpoint-extension-breakage">Breakpoint extension breakage</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">August 25, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-08-25T21:56:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>Many Rails users enjoyed this little gem developed by Florian Groß. But as <em>Mauricio Fernandez</em> noted in his <a href="http://eigenclass.org/hiki.rb?breakpoint+breaking+in+1.8.5">blog</a>, this extension is broken with the brand new Ruby 1.8.5. In order to make its magic possible, <em>breakpoint</em> library relied on the implementation of <code>Binding.of_caller</code>, which in turn relied on the bug in Ruby's implementation of trace calls. With new release, this bug has been patched.</p>

<p>Mauricio has started working of fixing this problem and proposed a new method <code>binding_n(n)</code>, which would return a binding for any frame in the call stack. But you don't have to wait for his work to complete. <em>ruby-debug</em> has this functionality already implemented for you. </p>

<p>Consider this small snippet:</p>

<pre><code>    require "rubygems"
    require 'ruby-debug'

    module Kernel
      def binding_n(n = 0)
        frame = Debugger.current_context.frames[n+1]
        raise "Unknown frame #{n}" unless frame
        frame.binding 
      end
    end

    def test
      puts eval("var", binding_n(1))
    end

    Debugger.start do
      var = 'Hello'
      test
    end
</code></pre>

<p>And most likely, I will add this method to the next version of <em>ruby-debug</em>. It can be handy sometimes.</p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-17">
  <h2 class="entry-title">
    <a href="/articles/2006/8/25/ruby-debug-0-4">ruby-debug 0.4</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">August 25, 2006 </span>
<!--
    
    <span class="comment-count"><a href="/articles/2006/8/25/ruby-debug-0-4">1 comment</a></span>
    !-->
</div>
<abbr class="published" title="2006-08-25T08:49:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>New release 0.4 is uploaded to gem server. Thanks to <a href="http://blog.nanorails.com/">Pascal</a> for providing a valuable feedback and suggestions for this release. </p>

<p>What's new?</p>

<ul>
<li><p><strong>sa[ve] FILE</strong> command saves current breakpoints and checkpoint to a script file.</p></li>
<li><p><strong>sc[ript] FILE</strong> command runs a script file. Note that script file can contain only control commands: add/remove breakpoints, interrupt program or thread, etc.</p></li>
<li><p><strong>l[ist] on/off</strong> command. I don't know about you, but when I step through my application I immediately need to use <strong>list</strong> command to see where I am in the source code. Now if you use <strong>list on</strong>, ruby-debug will start doing this for you. To turn it off, use <strong>list off</strong>.</p></li>
<li><p><strong>e[val] on/off</strong> command. When it's <strong>on<em>*, ruby-debug will evaluate your input if it doesn't recognize it as one of the commands. To turn it off, use *</em>eval off</strong>.</p></li>
<li><p><strong>tm[ate] n</strong> command now accepts a frame number.</p></li>
</ul>

<p><strong>Note</strong> that in my last announcement I forgot to mention that if you don't want to use <em>rdebug</em> script to start debugger and instead prefer to <code>require 'ruby-debug'</code>, now you must activate debugger explicitly by running <code>Debugger.start</code> or <code>Debugger.start_remote</code> method. Also, if you want to debug just a small part of your application, you can wrap it in a block and pass it to <code>Debugger.start</code> method. When <code>start</code> method finishes, it disactivates debugger. For example:</p>

<pre><code>    ...
    Debugger.start do
      # code you want to debug goes here
      ...
    end
</code></pre>

<p>Enjoy.</p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
    <a href="/articles/2006/8/25/ruby-debug-0-4">1 comment</a>
  
</p>
</div>

<div class="hentry" id="article-14">
  <h2 class="entry-title">
    <a href="/articles/2006/8/16/ruby-debug-0-3">ruby-debug 0.3</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">August 15, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-08-15T21:50:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>OK, here's a new version of ruby-debug. Most changes are related to the remote debugging and improvements targeted for a possible GUI integration:</p>

<ul>
<li><p><strong>Wait for a client connection</strong>. With this option on, the debugger will wait for a connection, before returning control to the script. You can enable it with <code>-w</code> option of <code>rdebug</code> script or by calling <code>Debugger.wait_connection = true</code>.</p></li>
<li><p><strong>Stop on connect</strong>. With this option on, the debugger will stop when a remote client establishes a connection. <code>rdebug</code> script has this parameter enabled by default, but you can disable it with <code>-n</code> option. In your own script you can use <code>Debugger.stop_on_connect = true</code> to activate it.</p></li>
<li><p><strong>Controlling thread</strong>. When activating a remote debugger, a control thread is activated as well. It listens on the socket (port 8990, by default) and accepts a number of commands that you can use to control a debugger, such as add/delete breakpoints, interrupt an application, etc. This is quite helpful for a GUI frontend, where you can set breakpoints at any time while your application is running.</p></li>
</ul>

<p>There are also a couple of additions to the debugger commands:</p>

<ul>
<li><p><strong>l[ist] =</strong> - displays the current exception point.</p></li>
<li><p><strong>f[rame] n</strong> - switches to nth frame. You can see the list of frames and their numbers with <strong>frame</strong> or <strong>where</strong> command.</p></li>
<li><p><strong>tm[ate]</strong> - if you are running Mac OSX and addicted to <a href="http://www.macromates.com">TextMate</a>, this command opens the current file using this editor.</p></li>
</ul>

<p>That's all for now. Enjoy.</p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-12">
  <h2 class="entry-title">
    <a href="/articles/2006/7/21/current-state-of-ruby-debuggers">Current State of Ruby Debuggers</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">July 21, 2006 </span>
<!--
    
    <span class="comment-count"><a href="/articles/2006/7/21/current-state-of-ruby-debuggers">0 comments</a></span>
    !-->
</div>
<abbr class="published" title="2006-07-21T12:21:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>Scott Bronson has published <a href="http://news.u32.net/articles/2006/07/20/reviewing-ruby-on-rails-debuggers">a very cool article</a> about the current offerings when it comes to debugging  Ruby applications. First off, I appreciate the kind words regarding <strong>ruby-debug</strong> extension. Second off, he made a very interesting observation: </p>

<pre><code>    I hardly ever need a debugger when developing new Ruby on Rails applications.  
    However, when trying to understand an existing codebase, I find that few things 
    help more in understanding exactly what is going on than stepping through 
    the code using a debugger.
</code></pre>

<p>I fully subscribe to this idea. I've been developing with Ruby since 2002 and I hardly ever needed a debugger. But there were a couple of times when I really wanted to have a debugger. It was when I ran into a bug in an existing library and I didn't have an intimate knowledge of its internals <em>(no pun intended)</em>. It's just much easier to step through the code and see how things are meshed together.</p>

<p>Also, I'd like to make some comments on the current debugger offerings:</p>

<ul>
<li><p>There is an official <strong>debug.rb</strong> library bundled with the standard Ruby distribution. AFAIK, all other debuggers, except maybe <a href="http://www.ruby-ide.com/ruby/ruby_ide_and_ruby_editor.php">Arachno Ruby</a>'s one, are based on this small and nifty library, including my <a href="http://rubyforge.org/projects/ruby-debug">ruby-debug</a>. The major drawback of it is the speed of the execution.</p></li>
<li><p>Debugger from <a href="http://rubyforge.org/projects/zenhacks/">ZenHack</a> tries to fix this problem by re-implementing trace function in C using RubyInline extension. Unfortunately, it is still quite slow to my taste.</p></li>
<li><p>Debugger from <a href="http://www.ruby-ide.com/ruby/ruby_ide_and_ruby_editor.php">Arachno Ruby</a> IDE is very nice, but the last time I checked it used a patched version of Ruby interpreter. Which means that you have to ask for a new patch with each subsequent Ruby release. (<em>But don't quote me on that though :-</em>)</p></li>
<li><p>There is another GUI debugger called <a href="http://mr-guid.rubyforge.org/">MrGuid</a> which uses a slightly modified version of <strong>debug.rb</strong>.</p></li>
</ul>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
    <a href="/articles/2006/7/21/current-state-of-ruby-debuggers">0 comments</a>
  
</p>
</div>

<div class="hentry" id="article-11">
  <h2 class="entry-title">
    <a href="/articles/2006/7/17/changes-in-version-ruby-debug-0-2">Changes in version ruby-debug 0.2</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">July 16, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-07-16T20:20:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <h3>Remote Debugging</h3>

<p>I've just released a new version of <strong>ruby-debug</strong> which has a new feature: <em>remote debugging</em>. 
In order to use it you have to pass -s parameter to <em>rdebug</em> script:</p>

<pre><code>    $ rdebug -s &lt;script.rb&gt;
</code></pre>

<p>This option makes the debugger start listening for an incoming TCP connection on port 8989, by default. You can change the default port and host name with -p and -h option respectively. </p>

<p>Now when the debugger is started this way, you can connect to it using this command:</p>

<pre><code>    $ rdebug -c
</code></pre>

<p>Also since this feature is implemented using plain sockets, you can connect to the remote debugger using a plain telnet client:</p>

<pre><code>    $ telnet localhost 8989
    Trying ::1...
    Connected to localhost.
    Escape character is '^]'.
    script/../config/../app/controllers/shop_controller.rb:28: product_id = params['id']
    PROMPT (rdb:3) 
    list
    [23, 32] in script/../config/../app/controllers/shop_controller.rb
       23      end
       24    end
       25  
       26    def product
       27      debugger
    =&gt; 28      product_id = params['id']
       29      unless product_id
       30        redirect_to :action =&gt; 'index'
       31        return
       32      end
    PROMPT (rdb:3) 
    cont
</code></pre>

<h3>API Changes</h3>

<p>One more thing. There are two important changes have been made. </p>

<ul>
<li><p>First off, starting from this version when you require 'ruby-debug', it doesn't activate the debugger by default. You have to explicitly activate it by calling <code>Debugger#start</code> method. Also if you want to activate remote debugging, you should start the listener server by calling <code>Debugger#start_server(host, port)</code> method.</p>

<pre><code>require 'ruby-debug'
Debugger.start_server
Debugger.start
</code></pre></li>
<li><p>Second off, it used to be possible at the debugger prompt to type anything and the debugger evaluates the expression, now you should use <strong>eval</strong> or <strong>p</strong> command.</p></li>
</ul>

<h3>Win32 gem</h3>

<p>Thanks to Max Muermann, win32 version of <strong>ruby-debug</strong> 0.1.5 is available for download. The <strong>ruby-debug</strong> 0.2 version is coming too.</p>

<p><strong>Update</strong>: win32 version of ruby-debug 0.2 is now available.</p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

<div class="hentry" id="article-9">
  <h2 class="entry-title">
    <a href="/articles/2006/7/12/tutorial-on-ruby-debug">Tutorial on ruby-debug</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">July 11, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-07-11T20:15:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <h3>Preface</h3>

<p><strong>Overcomplicated specifications lead to overcomplicated implementations.</strong> Lately I've been fixing issues with <em>ActionWebService</em> framework - a soon to be removed part of Ruby on Rails. I have to use SOAP in the web application I'm developing. My client needs to keep his product inventory in a good shape and he requested to implement some of the inventory management functionality using handheld devices. There is a .Net environment available for this kind of devices and it works very well. So I desperately needed a functional web service implementation for Rails. That why I volunteered to fix AWS. And that's when I found out that <a href="http://rubyforge.org/projects/ruby-breakpoint">ruby-breakpoint</a> just doesn't cut it. Don't get me wrong, soap4r is a fine piece of software, but SOAP is difficult and obscure, which leads to complicated libraries that implement it. The situation is even worse when such libraries have almost no documentation whatsoever. </p>

<p>So instead of just stopping at some point in your program to examine the environment (the facility offered by <em>ruby-breakpoint</em> library), <strong>ruby-debug</strong> extension offers the full-fledged debugger for Ruby. The main difference between <strong>ruby-debug</strong> and the standard <strong>debug.rb</strong> library is the speed of the execution. Major problem with <strong>debug.rb</strong> is that it uses <code>Kernel#set_trace_func</code> method, which requires creation of Binding object for each hook invocation. It is fine for small scripts, but for the real world applications like Rails ones, <strong>debug.rb</strong> is almost impossible to use. You just sit and watch how Ruby interpreter creates enormous amount of Binding objects, just in order to destroy them with the immediate garbage collection cycle. It also explains that <strong>ruby-debug</strong> doesn't support <em>watchpoints</em> for the same reason.</p>
  
    
    <div class="extended">
      <p><a href="/articles/2006/7/12/tutorial-on-ruby-debug">Continue reading...</a></p>
    </div>
    
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/rails">Rails</a> <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
    Tagged with: <a href="/tags/debug" rel="tag">debug</a>&nbsp;<a href="/tags/ruby" rel="tag">ruby</a>&nbsp; |
  
  
</p>
</div>

<div class="hentry" id="article-8">
  <h2 class="entry-title">
    <a href="/articles/2006/7/7/faster-debugger-for-ruby">Faster debugger for Ruby</a>
  </h2>
  <div class="vcard">
  
    Posted on <span class="published">July 07, 2006 </span>
<!--
    !-->
</div>
<abbr class="published" title="2006-07-07T18:15:00+00:00"></abbr>
<!--<br class="clear" />!-->
  <div class="entry-content">
  <p>I've been watching a thread on ruby-talk about the possibility to have a faster debugger for Ruby.</p>

<p>Now when Ruby 1.8.4 has a better C based API for tracing code execution, it is possible to significantly speed up <em>debug.rb</em>. I've been playing with this idea for last two days and came up with <em>ruby-debug</em> extension:</p>

<h3>Follow these easy steps:</h3>

<ul>
<li>Download extension <a href="http://datanoise.com/files/ruby-debug-0.1.gem">ruby-debug-0.1.gem</a>.</li>
<li>Install it with <code>sudo gem install ruby-debug-0.1.gem</code></li>
<li><p>Use either</p>

<pre><code>    $ rdebug _your-script_
</code></pre>

<p>Or for your Rails application:</p>

<ol>
<li><p>Add to your config/environments/development.rb</p>

<pre><code> require 'ruby-debug'
</code></pre></li>
<li><p>Use Kernel#debugger method to interrupt your application and invoke debugger</p>

<pre><code> def myaction
  ...
  debugger
  ...
 end
</code></pre></li>
</ol></li>
</ul>

<p>Enjoy.</p>

<p><strong>Update.</strong> I've created a project on <a href="http://rubyforge.org/projects/ruby-debug">rubyforge.org</a> for this extension and uploaded a bugfix version 0.1.2. Now you don't have to download the gem file from this site. Just use </p>

<pre><code>    $ gem install ruby-debug
</code></pre>

<p>command to install it.</p>
  
</div>
  <p class="article-footer">
  
    Filed under:  <a href="/rails">Rails</a> <a href="/ruby">Ruby</a> <a class="selected" href="/ruby-debug">ruby-debug</a> |
  
  
  
</p>
</div>

    </div>

    <div id="sidebar">

      <!-- Delete the comment blocks if you'd like to display the search form -->
      <div class="sidebar-node">
        <div id="search" class="search">
          <form action="/search" id="sform" method="get" name="sform">
            <p><input type="text" id="q" name="q" value="" /></p>
	  </form>Search Data Noise
        </div>
      </div>

      <div class="sidebar-node">
         <h3>Syndication</h3>
        <div class="sidebar-text">
           <a href="/feed/atom.xml"><img src="/images/feed.png" width="32" height="32" border="0"/></a> Atom Feed
        </div>
      </div>

      <!-- Delete the comment blocks if you'd like to list out your sections -->
      
      <div class="sidebar-node">
        <h3>Sections</h3>
        <div class="sidebar-text">
          <ul>
          
            <li><a class="selected" href="/">Home</a> (7)</li>
          
            <li><a href="/rails">Rails</a> (11)</li>
          
            <li><a href="/textmate">TextMate</a> (4)</li>
          
            <li><a href="/ruby">Ruby</a> (15)</li>
          
            <li><a href="/ruby-debug">ruby-debug</a> (15)</li>
          
            <li><a href="/soap">SOAP</a> (1)</li>
          
            <li><a href="/osx">OSX</a> (2)</li>
          
            <li><a href="/editors">Editors</a> (0)</li>
          
          </ul>
        </div>
      </div>
      


      <!-- Delete the comment blocks if you'd like to display links for the monthly archive -->
      
      <div class="sidebar-node">
        <h3>Archives</h3>
        <div class="sidebar-text">
          <ul>
          
            <li><a href="/ruby-debug/archives/2009/3">March 2009</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2009/2">February 2009</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2009/1">January 2009</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/12">December 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/11">November 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/10">October 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/9">September 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/8">August 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/7">July 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/6">June 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/5">May 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/4">April 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/3">March 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/2">February 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2008/1">January 2008</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/12">December 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/11">November 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/10">October 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/9">September 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/8">August 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/7">July 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/6">June 2007</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2007/5">May 2007</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2007/4">April 2007</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2007/3">March 2007</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2007/2">February 2007</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2007/1">January 2007</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2006/12">December 2006</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2006/11">November 2006</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2006/10">October 2006</a> (0)</li>
          
            <li><a href="/ruby-debug/archives/2006/9">September 2006</a> (1)</li>
          
            <li><a href="/ruby-debug/archives/2006/8">August 2006</a> (4)</li>
          
            <li><a href="/ruby-debug/archives/2006/7">July 2006</a> (4)</li>
          
          </ul>
        </div>
      </div>
      

      <!--div class="sidebar-node">
        <h3>Donation</h3>
        <div class="sidebar-text">
          If you find my software of any value and you feel like you want to support me
          <form action="https://www.paypal.com/cgi-bin/webscr" method="post">
          <input type="hidden" name="cmd" value="_s-xclick">
          <input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but21.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
          <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
          <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
          ">
          </form>
        </div>
      </div-->
     
      <div class="sidebar-node">
      <h3>Contact</h3>
      <div class="sidebar-text">
        icq: 18903171<br/>
        yahoo: ksibilev<br/>
        e-mail: <br/>ksibilev at yahoo.com
      </div>
      </div>

      <div class="sidebar-node">
        <div class="sidebar-text">      
          <script type="text/javascript" src="http://embed.technorati.com/embed/27cjrm43cw.js"></script>
        </div>
      </div>

      <dev id="google_sidebar">
      <script type="text/javascript"><!--
      google_ad_client = "pub-1175715431761636";
      /* 160x600, created 7/15/08 */
      google_ad_slot = "7127269170";
      google_ad_width = 160;
      google_ad_height = 600;
      //-->
      </script>
      <script type="text/javascript"
      src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
      </script>
      </dev>

    </div>
    <div style="clear: both;"></div>
  </div>

  <div id="shadow"></div>
  <div id="footer"><a href="/">Data Noise</a> | powered by <a href="http://www.mephistoblog.com">mephisto</a> | styled with <a href="http://www.benlog.org/projects/reddish">reddish</a></div>
  
</div>

</body>
</html>
